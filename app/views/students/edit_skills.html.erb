<% content_for :head do %>
  <script>
	$(function(){
		$('#other_skill_input').autocomplete({source:'<%=student_skills_path(@student)%>'});
	});
  </script>
<% end %>

<%=render 'layouts/student_user_panel'%>
<div class="large-9 columns">
	<h1>開發技能</h1>

	<%=link_to 'add', "#", :onclick=>"$('.add_box').show(100);" %>
	<%=link_to 'back', student_path('me') %>
	<div class="add_box" style="display:none;">
	<%=form_for @new_skill, :url => student_skills_path(@student), :method => :post do |f|%>
		<%@skill_options.each do |s|%>
			<%=f.radio_button 'skill_id', s.id,:required=>true,:onclick=>'clickSkillRadio();';
 %>
			<%=s.skill_name%>
		<% end -%>
		<div>
		<%=f.radio_button 'skill_id', -1,:id=>'other_skill',:required=>true,:onclick=>'clickSkillRadio();' %>
		<%=text_field_tag 'other_skill' ,'',:id=>:other_skill_input,:disabled=>true,:placeholder=>'其他', :style=>'width:100px;display:inline'%>
		</div>
		<%=f.text_area 'skill_description'%>
		<%=f.submit 'add'%>
	<%end%>
	</div>
	<div class="skill_board column">
		<%@skills.each do |s|%>
			<div class="skill_item">
				<div><%=link_to 'edit','#', :onclick=>"editable($(this));", :data=>{id:s.id, student_id:s.student_id}%>
					<%=link_to 'delete','#', :onclick=>'if(confirm("確定要刪除"))$.ajax({type:"delete",url:"'+student_skill_path(@student,s)+'",success:function(){window.location.reload();}});'%></div>
				<div class="large-3 column">
					<%=s.skill.skill_name%>
				</div>
				<div class="large-9 column description">
					<p><%=s.skill_description%></p>
				</div>
			</div>
			<hr/>
		<% end -%>
	</div>
	
</div>